---
layout: post
title:  "A twitter bot"
date:   2015-04-08 00:00:00
author: Josep
categories: notes
permalink: /twitterbot.html
---

Python is getting bigger in the data science community (due to libraries such as Pandas or SciPy) and I feel like it is an increasingly important skill to have. I used python a bit for a couple of projects in my undergrad, however I have never been proficient at it (I can get done must stuff I need to). In order to get better at it, I will start coding random projects I find interesting.

The first one happened over the last weekend. I saw that [Walter Hickney](https://twitter.com/walthickey) from [FiveThirtyEight](http://fivethirtyeight.com/) had developed a [twitter bot](https://twitter.com/538bot) that mimics someone's twitter updates using Markov chains. I though it was a pretty cool thing and it did not sound too complicated (i.e. something I could get done in a day). I was particularly interested in learning how to work with text, implement Markov chains and use the twitter API. Long story short, by Sunday night my bot was alive on Twitter.

</br>
## How does it work?

My main reference while constructing the bot was this Stack Overflow question^[[1]](#1). It was particularly useful because it only outlined how to implement it conceptually, allowing me to come up with the code. 

The first part consisted on getting the twitter updates from a user. To do so, I used *python-twitter*^[[2]](#2), one of the multiple python libraries for the twitter [REST API](https://dev.twitter.com/rest/public). It was surprisingly easy to use and it no time I already had all the tweets downloaded on my computer. Saving it into a csv file (so I did not have to query the API every time I ran the code) ended up being more complicated than expected. Since I was scraping a twitter account in Spanish, there were a whole bunch of characters that required Unicode encoding. I finally managed to get it to work, but I should learn more on the different encodings.  

Next, I build the Markov chains by implementing a random walk through a dictionary as described in [[1]](#1). The sentences generated by the code tend to be grammatically correct, since they are based on real word orders. I would say that about 60% of them are nonsense. But the other 40% are genuinely funny. To make the bot post at random times I set a 1/8 probability of returning a tweet every time the code is run. 

Finally, I had to get the code to run periodically. I found a tutorial that explained how to do it with heroku^[[3]](#3). I enjoyed getting some first hand experience deploying a little app with Heroku. 

</br>
## Who I mimicking?

The code it written so that changing the twitter username is as simple as changing the value of a string. For the public version of the bot (i.e. the one that will be publishing on twitter) I wanted someone relatively know that would also result in funny tweets.

 In Spain, there has been a big debate on the [lack of communication from our government](http://blogs.elconfidencial.com/espana/una-cierta-mirada/2015-04-06/rajoy-gobernamos-bien-comunicamos-mal_753924/). The president has been avoiding interviews and press conferences without questions have become the norm. In this context, contributing to generate more useless communication felt like the *right* choice. So the bot uses the tweets by the president of Spain [Mariano Rajoy](http://www.twitter.com/marianorajoy) to generate even more empty political propaganda. 

</br>
 The source code is available on github^[[4]](#4). You can check the bot in action at:

 <p align="center"> http://twitter.com/politicorobot </p>


</br>
p.s. I (not so) secretly hope that it becomes mildly viral. So go now to twitter and follow him!
</br>
___________
</br>

## References

<a name="1"></a>[1] How do Markov Chain Chatbots work? </br>
http://stackoverflow.com/questions/5306729/how-do-markov-chain-chatbots-work

<a name="2"></a>[2] twitter-python </br>
https://github.com/bear/python-twitter

<a name="3"></a>[3] Five Steps To Build Your Own Random Non-Sequitur Twitter Bot </br> http://readwrite.com/2014/06/20/random-non-sequitur-twitter-bot-instructions

<a name="4"></a>[4] Politicorobot - github </br>
https://github.com/josepcasas/politicorobot